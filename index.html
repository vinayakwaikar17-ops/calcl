<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>CalcPro Suite â€” All-in-One Calculators</title>
<link rel="preconnect" href="https://fonts.googleapis.com">
<link href="https://fonts.googleapis.com/css2?family=Syne:wght@400;600;700;800&family=DM+Mono:ital,wght@0,400;0,500;1,400&family=Outfit:wght@300;400;500;600&display=swap" rel="stylesheet">
<style>
*, *::before, *::after { box-sizing: border-box; margin: 0; padding: 0; }

:root {
  --bg: #0a0a0f;
  --surface: #111118;
  --surface2: #1a1a24;
  --surface3: #22222f;
  --border: #2a2a3a;
  --accent: #6c63ff;
  --accent2: #ff6b6b;
  --accent3: #43e97b;
  --accent4: #f7971e;
  --accent5: #00c6ff;
  --text: #f0f0f8;
  --text2: #9090aa;
  --text3: #5a5a7a;
  --glow: rgba(108, 99, 255, 0.25);
  --radius: 16px;
  --radius-sm: 10px;
}

html { scroll-behavior: smooth; }

body {
  font-family: 'Outfit', sans-serif;
  background: var(--bg);
  color: var(--text);
  min-height: 100vh;
  overflow-x: hidden;
}

/* â”€â”€ BACKGROUND EFFECT â”€â”€ */
body::before {
  content: '';
  position: fixed; inset: 0; z-index: 0;
  background:
    radial-gradient(ellipse 80% 50% at 20% 10%, rgba(108,99,255,0.08) 0%, transparent 70%),
    radial-gradient(ellipse 60% 40% at 80% 80%, rgba(67,233,123,0.05) 0%, transparent 60%),
    radial-gradient(ellipse 50% 60% at 60% 30%, rgba(0,198,255,0.04) 0%, transparent 70%);
  pointer-events: none;
}

/* â”€â”€ HEADER â”€â”€ */
.header {
  position: sticky; top: 0; z-index: 100;
  background: rgba(10, 10, 15, 0.85);
  backdrop-filter: blur(20px);
  border-bottom: 1px solid var(--border);
  padding: 0 2rem;
}
.header-inner {
  max-width: 1400px; margin: 0 auto;
  display: flex; align-items: center; gap: 2rem;
  height: 64px;
}
.logo {
  font-family: 'Syne', sans-serif;
  font-size: 1.4rem; font-weight: 800;
  background: linear-gradient(135deg, var(--accent), var(--accent5));
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
  white-space: nowrap;
}
.logo span { color: var(--accent2); -webkit-text-fill-color: var(--accent2); }

/* â”€â”€ NAV TABS â”€â”€ */
.nav-tabs {
  display: flex; gap: 4px;
  overflow-x: auto; flex: 1;
  scrollbar-width: none;
}
.nav-tabs::-webkit-scrollbar { display: none; }
.nav-tab {
  display: flex; align-items: center; gap: 6px;
  padding: 7px 14px; border-radius: 8px;
  border: 1px solid transparent;
  background: none; cursor: pointer;
  color: var(--text2); font-family: 'Outfit', sans-serif;
  font-size: 0.82rem; font-weight: 500;
  white-space: nowrap; transition: all 0.2s;
}
.nav-tab:hover { color: var(--text); background: var(--surface2); }
.nav-tab.active {
  color: #fff; background: var(--surface2);
  border-color: var(--border);
}
.nav-tab .tab-icon { font-size: 1rem; }

/* â”€â”€ MAIN LAYOUT â”€â”€ */
.main { max-width: 1400px; margin: 0 auto; padding: 2rem; position: relative; z-index: 1; }

/* â”€â”€ HERO â”€â”€ */
.hero {
  text-align: center; padding: 3.5rem 1rem 2.5rem;
}
.hero-badge {
  display: inline-flex; align-items: center; gap: 6px;
  padding: 5px 14px; border-radius: 99px;
  border: 1px solid rgba(108,99,255,0.3);
  background: rgba(108,99,255,0.1);
  font-size: 0.78rem; color: var(--accent); margin-bottom: 1.2rem;
}
.hero h1 {
  font-family: 'Syne', sans-serif;
  font-size: clamp(2.4rem, 6vw, 4rem); font-weight: 800;
  line-height: 1.1; margin-bottom: 1rem;
  background: linear-gradient(135deg, #fff 30%, var(--accent) 100%);
  -webkit-background-clip: text; -webkit-text-fill-color: transparent;
}
.hero p { font-size: 1.05rem; color: var(--text2); max-width: 560px; margin: 0 auto; }

/* â”€â”€ CALCULATOR PANEL â”€â”€ */
.calc-section { display: none; }
.calc-section.active { display: block; animation: fadeUp 0.3s ease; }

@keyframes fadeUp {
  from { opacity: 0; transform: translateY(12px); }
  to { opacity: 1; transform: translateY(0); }
}

.section-header {
  display: flex; align-items: center; gap: 12px;
  margin-bottom: 2rem;
}
.section-icon {
  width: 44px; height: 44px; border-radius: 12px;
  display: flex; align-items: center; justify-content: center;
  font-size: 1.3rem; flex-shrink: 0;
}
.section-title { font-family: 'Syne', sans-serif; font-size: 1.5rem; font-weight: 700; }
.section-desc { font-size: 0.88rem; color: var(--text2); }

/* â”€â”€ CARDS â”€â”€ */
.card {
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.75rem;
  transition: border-color 0.2s;
}
.card:hover { border-color: var(--surface3); }

.grid-2 { display: grid; grid-template-columns: 1fr 1fr; gap: 1.5rem; }
.grid-3 { display: grid; grid-template-columns: repeat(3, 1fr); gap: 1rem; }
@media (max-width: 768px) {
  .grid-2, .grid-3 { grid-template-columns: 1fr; }
}

/* â”€â”€ FORM ELEMENTS â”€â”€ */
.form-group { margin-bottom: 1.1rem; }
label {
  display: block; font-size: 0.8rem; font-weight: 500;
  color: var(--text2); margin-bottom: 6px; letter-spacing: 0.04em;
  text-transform: uppercase;
}
input[type="text"], input[type="number"], input[type="date"], select {
  width: 100%; padding: 11px 14px;
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--radius-sm); color: var(--text);
  font-family: 'Outfit', sans-serif; font-size: 0.95rem;
  transition: border-color 0.2s, box-shadow 0.2s;
  outline: none;
}
input:focus, select:focus {
  border-color: var(--accent);
  box-shadow: 0 0 0 3px rgba(108,99,255,0.15);
}
select option { background: var(--surface2); }

/* â”€â”€ BUTTONS â”€â”€ */
.btn {
  display: inline-flex; align-items: center; justify-content: center; gap: 8px;
  padding: 12px 24px; border-radius: var(--radius-sm);
  font-family: 'Outfit', sans-serif; font-size: 0.95rem; font-weight: 600;
  cursor: pointer; border: none; transition: all 0.2s; width: 100%;
}
.btn-primary {
  background: linear-gradient(135deg, var(--accent), #8b5cf6);
  color: #fff; box-shadow: 0 4px 20px rgba(108,99,255,0.3);
}
.btn-primary:hover { transform: translateY(-1px); box-shadow: 0 6px 28px rgba(108,99,255,0.45); }
.btn-primary:active { transform: translateY(0); }
.btn-secondary {
  background: var(--surface2); color: var(--text2);
  border: 1px solid var(--border);
}
.btn-secondary:hover { color: var(--text); border-color: var(--text3); }

/* â”€â”€ RESULT BOX â”€â”€ */
.result-box {
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--radius-sm); padding: 1.5rem;
  margin-top: 1.2rem; display: none;
}
.result-box.visible { display: block; animation: fadeUp 0.25s ease; }
.result-primary {
  font-family: 'DM Mono', monospace;
  font-size: 2rem; font-weight: 500;
  color: var(--accent3); letter-spacing: -0.02em;
}
.result-label { font-size: 0.8rem; color: var(--text2); margin-bottom: 6px; text-transform: uppercase; }

.result-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(160px, 1fr));
  gap: 1rem; margin-top: 1rem;
}
.result-item {
  background: var(--surface3); border-radius: var(--radius-sm);
  padding: 12px 14px;
}
.result-item-label { font-size: 0.73rem; color: var(--text2); margin-bottom: 4px; text-transform: uppercase; }
.result-item-value {
  font-family: 'DM Mono', monospace;
  font-size: 1rem; color: var(--text); font-weight: 500;
}

/* â”€â”€ BASIC CALCULATOR â”€â”€ */
.calc-display {
  background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 1.5rem 1.5rem 1rem;
  margin-bottom: 1rem; min-height: 90px;
  display: flex; flex-direction: column; align-items: flex-end; justify-content: flex-end;
}
.calc-expr { font-size: 0.85rem; color: var(--text3); font-family: 'DM Mono', monospace; min-height: 20px; }
.calc-main {
  font-family: 'DM Mono', monospace; font-size: 2.5rem;
  font-weight: 400; color: var(--text); word-break: break-all;
  text-align: right; min-height: 48px;
}

.btn-grid {
  display: grid; grid-template-columns: repeat(4, 1fr); gap: 8px;
}
.calc-btn {
  padding: 18px 10px; border-radius: var(--radius-sm);
  font-family: 'DM Mono', monospace; font-size: 1.1rem; font-weight: 500;
  cursor: pointer; border: none; transition: all 0.15s;
  background: var(--surface2); color: var(--text);
  border: 1px solid var(--border);
}
.calc-btn:hover { background: var(--surface3); transform: scale(0.97); }
.calc-btn:active { transform: scale(0.93); }
.calc-btn.op { background: rgba(108,99,255,0.15); color: var(--accent); border-color: rgba(108,99,255,0.3); }
.calc-btn.op:hover { background: rgba(108,99,255,0.25); }
.calc-btn.eq {
  background: linear-gradient(135deg, var(--accent), #8b5cf6);
  color: #fff; border: none; grid-column: span 2;
  box-shadow: 0 4px 16px rgba(108,99,255,0.4);
}
.calc-btn.eq:hover { box-shadow: 0 6px 24px rgba(108,99,255,0.55); }
.calc-btn.clr { background: rgba(255,107,107,0.15); color: var(--accent2); border-color: rgba(255,107,107,0.3); }
.calc-btn.zero { grid-column: span 2; }
.calc-btn.fn { background: var(--surface3); color: var(--text2); font-size: 0.85rem; }

/* â”€â”€ HISTORY â”€â”€ */
.history-list {
  list-style: none; max-height: 240px;
  overflow-y: auto; display: flex; flex-direction: column; gap: 6px;
}
.history-list::-webkit-scrollbar { width: 4px; }
.history-list::-webkit-scrollbar-track { background: transparent; }
.history-list::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }
.history-item {
  display: flex; justify-content: space-between; align-items: center;
  padding: 10px 14px; background: var(--surface2);
  border-radius: 8px; font-family: 'DM Mono', monospace; font-size: 0.85rem;
  cursor: pointer; transition: background 0.2s;
}
.history-item:hover { background: var(--surface3); }
.history-expr { color: var(--text2); }
.history-result { color: var(--accent3); font-weight: 500; }
.empty-state { text-align: center; padding: 2rem; color: var(--text3); font-size: 0.9rem; }

/* â”€â”€ GST SPECIFIC â”€â”€ */
.gst-toggle {
  display: flex; background: var(--surface2); border: 1px solid var(--border);
  border-radius: var(--radius-sm); padding: 4px; gap: 4px; margin-bottom: 1.2rem;
}
.gst-toggle-btn {
  flex: 1; padding: 9px; border-radius: 7px; border: none;
  background: none; color: var(--text2); font-family: 'Outfit', sans-serif;
  font-size: 0.88rem; font-weight: 500; cursor: pointer; transition: all 0.2s;
}
.gst-toggle-btn.active {
  background: var(--surface3); color: var(--text);
  box-shadow: 0 1px 6px rgba(0,0,0,0.3);
}

.rate-chips { display: flex; gap: 8px; flex-wrap: wrap; margin-bottom: 1.2rem; }
.rate-chip {
  padding: 6px 16px; border-radius: 99px; font-size: 0.85rem; font-weight: 500;
  cursor: pointer; border: 1px solid var(--border); background: var(--surface2);
  color: var(--text2); transition: all 0.2s;
}
.rate-chip:hover, .rate-chip.active {
  background: rgba(108,99,255,0.15); border-color: rgba(108,99,255,0.5);
  color: var(--accent);
}

/* â”€â”€ TDS CATEGORY SELECT â”€â”€ */
.category-grid {
  display: grid; grid-template-columns: repeat(auto-fill, minmax(140px, 1fr)); gap: 8px;
  margin-bottom: 1.2rem;
}
.cat-card {
  padding: 10px 12px; border-radius: var(--radius-sm);
  border: 1px solid var(--border); background: var(--surface2);
  cursor: pointer; transition: all 0.2s; text-align: center;
}
.cat-card:hover, .cat-card.active {
  border-color: rgba(67,233,123,0.4); background: rgba(67,233,123,0.08);
}
.cat-card .cat-icon { font-size: 1.3rem; margin-bottom: 4px; }
.cat-card .cat-name { font-size: 0.78rem; color: var(--text2); }
.cat-card.active .cat-name { color: var(--accent3); }

/* â”€â”€ AMORTIZATION TABLE â”€â”€ */
.amort-table {
  width: 100%; border-collapse: collapse;
  font-family: 'DM Mono', monospace; font-size: 0.82rem;
  margin-top: 1rem;
}
.amort-table th {
  text-align: left; padding: 10px 12px;
  background: var(--surface3); color: var(--text2);
  font-family: 'Outfit', sans-serif; font-size: 0.75rem;
  text-transform: uppercase; letter-spacing: 0.05em;
  border-bottom: 1px solid var(--border);
}
.amort-table td {
  padding: 9px 12px; border-bottom: 1px solid rgba(42,42,58,0.5);
  color: var(--text);
}
.amort-table tr:hover td { background: rgba(255,255,255,0.02); }
.amort-table .ellipsis { text-align: center; color: var(--text3); }

/* â”€â”€ CONVERSION TABLE â”€â”€ */
.conv-table { width: 100%; }
.conv-row {
  display: flex; align-items: center; justify-content: space-between;
  padding: 10px 0; border-bottom: 1px solid rgba(42,42,58,0.6);
}
.conv-row:last-child { border-bottom: none; }
.conv-unit { font-size: 0.82rem; color: var(--text2); min-width: 80px; }
.conv-value {
  font-family: 'DM Mono', monospace; font-size: 0.95rem;
  color: var(--text); font-weight: 400;
}
.conv-value.highlight { color: var(--accent4); font-size: 1.05rem; }

/* â”€â”€ QUICK TILES (home) â”€â”€ */
.quick-tiles {
  display: grid;
  grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
  gap: 1rem; margin-top: 2rem;
}
.quick-tile {
  background: var(--surface); border: 1px solid var(--border);
  border-radius: var(--radius); padding: 1.4rem;
  cursor: pointer; transition: all 0.25s; text-align: center;
}
.quick-tile:hover {
  border-color: var(--accent);
  box-shadow: 0 0 20px rgba(108,99,255,0.15);
  transform: translateY(-3px);
}
.quick-tile .tile-icon { font-size: 2rem; margin-bottom: 0.6rem; }
.quick-tile .tile-name { font-family: 'Syne', sans-serif; font-size: 0.95rem; font-weight: 700; }
.quick-tile .tile-desc { font-size: 0.75rem; color: var(--text2); margin-top: 4px; }

/* â”€â”€ STATUS BAR â”€â”€ */
.status-bar {
  display: flex; align-items: center; gap: 6px;
  padding: 8px 14px; border-radius: 8px;
  font-size: 0.8rem; margin-top: 0.75rem;
}
.status-bar.success { background: rgba(67,233,123,0.1); color: var(--accent3); border: 1px solid rgba(67,233,123,0.2); }
.status-bar.error { background: rgba(255,107,107,0.1); color: var(--accent2); border: 1px solid rgba(255,107,107,0.2); }
.status-bar.info { background: rgba(0,198,255,0.08); color: var(--accent5); border: 1px solid rgba(0,198,255,0.2); }

/* â”€â”€ FOOTER â”€â”€ */
.footer {
  text-align: center; padding: 2rem;
  color: var(--text3); font-size: 0.8rem;
  border-top: 1px solid var(--border); margin-top: 3rem;
  position: relative; z-index: 1;
}
.footer strong { color: var(--text2); }

/* â”€â”€ LOADER â”€â”€ */
.loader {
  display: inline-block; width: 16px; height: 16px;
  border: 2px solid rgba(255,255,255,0.2);
  border-top-color: #fff; border-radius: 50%;
  animation: spin 0.6s linear infinite;
}
@keyframes spin { to { transform: rotate(360deg); } }

/* â”€â”€ SCROLLBAR â”€â”€ */
::-webkit-scrollbar { width: 6px; }
::-webkit-scrollbar-track { background: transparent; }
::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
</style>
</head>
<body>

<!-- â”€â”€ HEADER â”€â”€ -->
<header class="header">
  <div class="header-inner">
    <div class="logo">Calc<span>Pro</span></div>
    <nav class="nav-tabs" id="navTabs">
      <button class="nav-tab active" data-tab="home"><span class="tab-icon">ğŸ </span> Home</button>
      <button class="nav-tab" data-tab="basic"><span class="tab-icon">ğŸ§®</span> Basic</button>
      <button class="nav-tab" data-tab="gst"><span class="tab-icon">ğŸ§¾</span> GST</button>
      <button class="nav-tab" data-tab="tds"><span class="tab-icon">ğŸ’¼</span> TDS</button>
      <button class="nav-tab" data-tab="emi"><span class="tab-icon">ğŸ¦</span> Loan/EMI</button>
      <button class="nav-tab" data-tab="percentage"><span class="tab-icon">ğŸ“Š</span> Percentage</button>
      <button class="nav-tab" data-tab="age"><span class="tab-icon">ğŸ‚</span> Age</button>
      <button class="nav-tab" data-tab="height"><span class="tab-icon">ğŸ“</span> Height</button>
      <button class="nav-tab" data-tab="length"><span class="tab-icon">ğŸ“</span> Length</button>
      <button class="nav-tab" data-tab="weight"><span class="tab-icon">âš–ï¸</span> Weight</button>
      <button class="nav-tab" data-tab="temp"><span class="tab-icon">ğŸŒ¡ï¸</span> Temperature</button>
      <button class="nav-tab" data-tab="area"><span class="tab-icon">ğŸ”·</span> Area</button>
    </nav>
  </div>
</header>

<!-- â”€â”€ MAIN â”€â”€ -->
<main class="main">

  <!-- HOME -->
  <section class="calc-section active" id="tab-home">
    <div class="hero">
      <div class="hero-badge">âœ¦ All Calculators in One Place</div>
      <h1>Your Complete<br>Calculator Suite</h1>
      <p>Professional-grade calculators for finance, measurement, and everyday math â€” beautifully designed and lightning fast.</p>
    </div>
    <div class="quick-tiles">
      <div class="quick-tile" onclick="switchTab('basic')"><div class="tile-icon">ğŸ§®</div><div class="tile-name">Basic Calculator</div><div class="tile-desc">Arithmetic & expressions</div></div>
      <div class="quick-tile" onclick="switchTab('gst')"><div class="tile-icon">ğŸ§¾</div><div class="tile-name">GST Calculator</div><div class="tile-desc">Inclusive & exclusive GST</div></div>
      <div class="quick-tile" onclick="switchTab('tds')"><div class="tile-icon">ğŸ’¼</div><div class="tile-name">TDS Calculator</div><div class="tile-desc">Tax deducted at source</div></div>
      <div class="quick-tile" onclick="switchTab('emi')"><div class="tile-icon">ğŸ¦</div><div class="tile-name">Loan / EMI</div><div class="tile-desc">Monthly instalments & interest</div></div>
      <div class="quick-tile" onclick="switchTab('percentage')"><div class="tile-icon">ğŸ“Š</div><div class="tile-name">Percentage</div><div class="tile-desc">% of, change, add/subtract</div></div>
      <div class="quick-tile" onclick="switchTab('age')"><div class="tile-icon">ğŸ‚</div><div class="tile-name">Age Calculator</div><div class="tile-desc">Exact age & birthday info</div></div>
      <div class="quick-tile" onclick="switchTab('height')"><div class="tile-icon">ğŸ“</div><div class="tile-name">Height Converter</div><div class="tile-desc">cm, ft, in, m, mm</div></div>
      <div class="quick-tile" onclick="switchTab('length')"><div class="tile-icon">ğŸ“</div><div class="tile-name">Length Converter</div><div class="tile-desc">mm to miles & beyond</div></div>
      <div class="quick-tile" onclick="switchTab('weight')"><div class="tile-icon">âš–ï¸</div><div class="tile-name">Weight Converter</div><div class="tile-desc">kg, lb, oz, stone</div></div>
      <div class="quick-tile" onclick="switchTab('temp')"><div class="tile-icon">ğŸŒ¡ï¸</div><div class="tile-name">Temperature</div><div class="tile-desc">Â°C, Â°F, K, Rankine</div></div>
      <div class="quick-tile" onclick="switchTab('area')"><div class="tile-icon">ğŸ”·</div><div class="tile-name">Area Calculator</div><div class="tile-desc">Circle, square, triangleâ€¦</div></div>
    </div>
  </section>

  <!-- â”€â”€ BASIC CALCULATOR â”€â”€ -->
  <section class="calc-section" id="tab-basic">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(108,99,255,0.15)">ğŸ§®</div>
      <div><div class="section-title">Basic Calculator</div><div class="section-desc">Arithmetic operations with history</div></div>
    </div>
    <div class="grid-2">
      <div class="card">
        <div class="calc-display">
          <div class="calc-expr" id="calcExpr"></div>
          <div class="calc-main" id="calcMain">0</div>
        </div>
        <div class="btn-grid">
          <button class="calc-btn fn" onclick="calcFn('sin')">sin</button>
          <button class="calc-btn fn" onclick="calcFn('cos')">cos</button>
          <button class="calc-btn fn" onclick="calcFn('sqrt')">âˆš</button>
          <button class="calc-btn fn" onclick="calcFn('pow2')">xÂ²</button>
          <button class="calc-btn clr" onclick="clearCalc()">AC</button>
          <button class="calc-btn clr" onclick="backspace()">âŒ«</button>
          <button class="calc-btn op" onclick="inputChar('%')">%</button>
          <button class="calc-btn op" onclick="inputChar('/')">Ã·</button>
          <button class="calc-btn" onclick="inputChar('7')">7</button>
          <button class="calc-btn" onclick="inputChar('8')">8</button>
          <button class="calc-btn" onclick="inputChar('9')">9</button>
          <button class="calc-btn op" onclick="inputChar('*')">Ã—</button>
          <button class="calc-btn" onclick="inputChar('4')">4</button>
          <button class="calc-btn" onclick="inputChar('5')">5</button>
          <button class="calc-btn" onclick="inputChar('6')">6</button>
          <button class="calc-btn op" onclick="inputChar('-')">âˆ’</button>
          <button class="calc-btn" onclick="inputChar('1')">1</button>
          <button class="calc-btn" onclick="inputChar('2')">2</button>
          <button class="calc-btn" onclick="inputChar('3')">3</button>
          <button class="calc-btn op" onclick="inputChar('+')">+</button>
          <button class="calc-btn zero" onclick="inputChar('0')">0</button>
          <button class="calc-btn" onclick="inputChar('.')">.</button>
          <button class="calc-btn eq" onclick="calculate()">=</button>
        </div>
      </div>
      <div class="card">
        <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:1rem">
          <div style="font-family:'Syne',sans-serif;font-weight:700">History</div>
          <button class="btn btn-secondary" style="width:auto;padding:6px 14px;font-size:0.8rem" onclick="clearHistory()">Clear</button>
        </div>
        <ul class="history-list" id="historyList">
          <li class="empty-state">No calculations yet.<br>Start calculating!</li>
        </ul>
      </div>
    </div>
  </section>

  <!-- â”€â”€ GST CALCULATOR â”€â”€ -->
  <section class="calc-section" id="tab-gst">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(247,151,30,0.15)">ğŸ§¾</div>
      <div><div class="section-title">GST Calculator</div><div class="section-desc">Calculate GST inclusive & exclusive â€” with CGST/SGST breakup</div></div>
    </div>
    <div class="grid-2">
      <div class="card">
        <div class="gst-toggle">
          <button class="gst-toggle-btn active" id="gstExclBtn" onclick="setGstType('exclusive')">Add GST (Exclusive)</button>
          <button class="gst-toggle-btn" id="gstInclBtn" onclick="setGstType('inclusive')">Remove GST (Inclusive)</button>
        </div>
        <div class="form-group">
          <label id="gstAmountLabel">Amount (Before GST)</label>
          <input type="number" id="gstAmount" placeholder="Enter amount" min="0">
        </div>
        <div style="margin-bottom:1rem">
          <label>GST Rate</label>
          <div class="rate-chips">
            <div class="rate-chip active" onclick="setGstRate(5)">5%</div>
            <div class="rate-chip" onclick="setGstRate(12)">12%</div>
            <div class="rate-chip" onclick="setGstRate(18)">18%</div>
            <div class="rate-chip" onclick="setGstRate(28)">28%</div>
            <div class="rate-chip" onclick="setGstRate('custom')">Custom</div>
          </div>
          <input type="number" id="gstRate" value="5" min="0" max="100" placeholder="GST rate %">
        </div>
        <button class="btn btn-primary" onclick="calcGST()">Calculate GST</button>
        <div id="gstStatus"></div>
      </div>
      <div class="card">
        <div style="font-family:'Syne',sans-serif;font-weight:700;margin-bottom:1.2rem">GST Breakdown</div>
        <div id="gstResult">
          <div class="empty-state">Enter amount and rate to see the GST breakdown</div>
        </div>
      </div>
    </div>
  </section>

  <!-- â”€â”€ TDS CALCULATOR â”€â”€ -->
  <section class="calc-section" id="tab-tds">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(67,233,123,0.12)">ğŸ’¼</div>
      <div><div class="section-title">TDS Calculator</div><div class="section-desc">Tax Deducted at Source â€” with surcharge & education cess</div></div>
    </div>
    <div class="grid-2">
      <div class="card">
        <div class="form-group">
          <label>Gross Amount (â‚¹)</label>
          <input type="number" id="tdsAmount" placeholder="Enter gross amount">
        </div>
        <div style="margin-bottom:1.2rem">
          <label>Payment Category</label>
          <div class="category-grid">
            <div class="cat-card active" onclick="setTdsCategory('salary','Salary',this)"><div class="cat-icon">ğŸ‘”</div><div class="cat-name">Salary<br>Sec 192</div></div>
            <div class="cat-card" onclick="setTdsCategory('interest','Interest',this)"><div class="cat-icon">ğŸ¦</div><div class="cat-name">Interest<br>Sec 194A</div></div>
            <div class="cat-card" onclick="setTdsCategory('dividend','Dividend',this)"><div class="cat-icon">ğŸ“ˆ</div><div class="cat-name">Dividend<br>Sec 194</div></div>
            <div class="cat-card" onclick="setTdsCategory('contractor','Contractor',this)"><div class="cat-icon">ğŸ”§</div><div class="cat-name">Contractor<br>Sec 194C</div></div>
            <div class="cat-card" onclick="setTdsCategory('professional','Professional',this)"><div class="cat-icon">âš–ï¸</div><div class="cat-name">Professional<br>Sec 194J</div></div>
            <div class="cat-card" onclick="setTdsCategory('rent','Rent',this)"><div class="cat-icon">ğŸ </div><div class="cat-name">Rent<br>Sec 194I</div></div>
            <div class="cat-card" onclick="setTdsCategory('commission','Commission',this)"><div class="cat-icon">ğŸ¤</div><div class="cat-name">Commission<br>Sec 194H</div></div>
            <div class="cat-card" onclick="setTdsCategory('nri','NRI',this)"><div class="cat-icon">âœˆï¸</div><div class="cat-name">NRI Payment<br>Sec 195</div></div>
          </div>
        </div>
        <button class="btn btn-primary" onclick="calcTDS()">Calculate TDS</button>
      </div>
      <div class="card" id="tdsResult">
        <div class="empty-state">Select a category and enter amount to calculate TDS</div>
      </div>
    </div>
  </section>

  <!-- â”€â”€ EMI CALCULATOR â”€â”€ -->
  <section class="calc-section" id="tab-emi">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(0,198,255,0.12)">ğŸ¦</div>
      <div><div class="section-title">Loan / EMI Calculator</div><div class="section-desc">Monthly EMI, total interest & amortization schedule</div></div>
    </div>
    <div class="grid-2">
      <div class="card">
        <div class="form-group">
          <label>Loan Amount (â‚¹)</label>
          <input type="number" id="emiPrincipal" placeholder="e.g. 500000" value="500000">
        </div>
        <div class="form-group">
          <label>Annual Interest Rate (%)</label>
          <input type="number" id="emiRate" placeholder="e.g. 8.5" value="8.5" step="0.1">
        </div>
        <div class="form-group">
          <label>Loan Tenure (Months)</label>
          <input type="number" id="emiTenure" placeholder="e.g. 60" value="60">
        </div>
        <button class="btn btn-primary" onclick="calcEMI()">Calculate EMI</button>
      </div>
      <div class="card" id="emiResult">
        <div class="empty-state">Enter loan details to calculate your EMI</div>
      </div>
    </div>
  </section>

  <!-- â”€â”€ PERCENTAGE â”€â”€ -->
  <section class="calc-section" id="tab-percentage">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(255,107,107,0.12)">ğŸ“Š</div>
      <div><div class="section-title">Percentage Calculator</div><div class="section-desc">Multiple percentage calculation modes</div></div>
    </div>
    <div class="card">
      <div style="display:flex;gap:8px;flex-wrap:wrap;margin-bottom:1.5rem">
        <button class="btn btn-secondary" style="width:auto;padding:8px 16px" id="pct-of-btn" onclick="setPctType('of')">X% of Y</button>
        <button class="btn btn-secondary" style="width:auto;padding:8px 16px" id="pct-what-btn" onclick="setPctType('what')">A is what % of B</button>
        <button class="btn btn-secondary" style="width:auto;padding:8px 16px" id="pct-change-btn" onclick="setPctType('change')">% Change</button>
        <button class="btn btn-secondary" style="width:auto;padding:8px 16px" id="pct-add-btn" onclick="setPctType('add')">Add X% to Y</button>
        <button class="btn btn-secondary" style="width:auto;padding:8px 16px" id="pct-subtract-btn" onclick="setPctType('subtract')">Subtract X% from Y</button>
      </div>
      <div class="grid-2">
        <div>
          <div id="pctInputs"></div>
          <button class="btn btn-primary" onclick="calcPct()" style="margin-top:1rem">Calculate</button>
        </div>
        <div id="pctResult"><div class="empty-state">Select a calculation type and enter values</div></div>
      </div>
    </div>
  </section>

  <!-- â”€â”€ AGE CALCULATOR â”€â”€ -->
  <section class="calc-section" id="tab-age">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(255,182,100,0.12)">ğŸ‚</div>
      <div><div class="section-title">Age Calculator</div><div class="section-desc">Exact age, days lived, next birthday & more</div></div>
    </div>
    <div class="grid-2">
      <div class="card">
        <div class="form-group">
          <label>Date of Birth</label>
          <input type="date" id="ageDob">
        </div>
        <button class="btn btn-primary" onclick="calcAge()">Calculate Age</button>
      </div>
      <div class="card" id="ageResult"><div class="empty-state">Enter your date of birth to see detailed age information</div></div>
    </div>
  </section>

  <!-- â”€â”€ HEIGHT CONVERTER â”€â”€ -->
  <section class="calc-section" id="tab-height">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(108,99,255,0.12)">ğŸ“</div>
      <div><div class="section-title">Height Converter</div><div class="section-desc">Convert between cm, meters, feet, inches & more</div></div>
    </div>
    <div class="card">
      <div class="grid-2">
        <div>
          <div class="form-group">
            <label>Height Value</label>
            <input type="number" id="heightVal" placeholder="Enter value" step="any">
          </div>
          <div class="form-group">
            <label>From Unit</label>
            <select id="heightFrom">
              <option value="cm">Centimetres (cm)</option>
              <option value="m">Metres (m)</option>
              <option value="ft">Feet (ft)</option>
              <option value="in">Inches (in)</option>
              <option value="mm">Millimetres (mm)</option>
            </select>
          </div>
          <button class="btn btn-primary" onclick="calcHeight()">Convert Height</button>
        </div>
        <div id="heightResult"><div class="empty-state">Enter a height value to convert to all units</div></div>
      </div>
    </div>
  </section>

  <!-- â”€â”€ LENGTH CONVERTER â”€â”€ -->
  <section class="calc-section" id="tab-length">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(67,233,123,0.12)">ğŸ“</div>
      <div><div class="section-title">Length Converter</div><div class="section-desc">Convert between all common and scientific length units</div></div>
    </div>
    <div class="card">
      <div class="grid-2">
        <div>
          <div class="form-group">
            <label>Length Value</label>
            <input type="number" id="lengthVal" placeholder="Enter value" step="any">
          </div>
          <div class="form-group">
            <label>From Unit</label>
            <select id="lengthFrom">
              <option value="mm">Millimetres (mm)</option>
              <option value="cm">Centimetres (cm)</option>
              <option value="m" selected>Metres (m)</option>
              <option value="km">Kilometres (km)</option>
              <option value="in">Inches (in)</option>
              <option value="ft">Feet (ft)</option>
              <option value="yd">Yards (yd)</option>
              <option value="mi">Miles (mi)</option>
              <option value="nm">Nautical Miles (nm)</option>
            </select>
          </div>
          <button class="btn btn-primary" onclick="calcLength()">Convert Length</button>
        </div>
        <div id="lengthResult"><div class="empty-state">Enter a value and unit to see all conversions</div></div>
      </div>
    </div>
  </section>

  <!-- â”€â”€ WEIGHT CONVERTER â”€â”€ -->
  <section class="calc-section" id="tab-weight">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(247,151,30,0.12)">âš–ï¸</div>
      <div><div class="section-title">Weight Converter</div><div class="section-desc">Kilograms, pounds, ounces, stone & more</div></div>
    </div>
    <div class="card">
      <div class="grid-2">
        <div>
          <div class="form-group">
            <label>Weight Value</label>
            <input type="number" id="weightVal" placeholder="Enter value" step="any">
          </div>
          <div class="form-group">
            <label>From Unit</label>
            <select id="weightFrom">
              <option value="kg" selected>Kilograms (kg)</option>
              <option value="g">Grams (g)</option>
              <option value="mg">Milligrams (mg)</option>
              <option value="lb">Pounds (lb)</option>
              <option value="oz">Ounces (oz)</option>
              <option value="ton">Metric Tonne</option>
              <option value="stone">Stone</option>
            </select>
          </div>
          <button class="btn btn-primary" onclick="calcWeight()">Convert Weight</button>
        </div>
        <div id="weightResult"><div class="empty-state">Enter a value and unit to see all weight conversions</div></div>
      </div>
    </div>
  </section>

  <!-- â”€â”€ TEMPERATURE CONVERTER â”€â”€ -->
  <section class="calc-section" id="tab-temp">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(255,107,107,0.12)">ğŸŒ¡ï¸</div>
      <div><div class="section-title">Temperature Converter</div><div class="section-desc">Celsius, Fahrenheit, Kelvin & Rankine</div></div>
    </div>
    <div class="card">
      <div class="grid-2">
        <div>
          <div class="form-group">
            <label>Temperature Value</label>
            <input type="number" id="tempVal" placeholder="Enter temperature" step="any">
          </div>
          <div class="form-group">
            <label>From Unit</label>
            <select id="tempFrom">
              <option value="c">Celsius (Â°C)</option>
              <option value="f">Fahrenheit (Â°F)</option>
              <option value="k">Kelvin (K)</option>
            </select>
          </div>
          <button class="btn btn-primary" onclick="calcTemp()">Convert Temperature</button>
        </div>
        <div id="tempResult"><div class="empty-state">Enter a temperature to convert between all scales</div></div>
      </div>
    </div>
  </section>

  <!-- â”€â”€ AREA CALCULATOR â”€â”€ -->
  <section class="calc-section" id="tab-area">
    <div class="section-header">
      <div class="section-icon" style="background:rgba(0,198,255,0.12)">ğŸ”·</div>
      <div><div class="section-title">Area Calculator</div><div class="section-desc">Calculate area and perimeter of common shapes</div></div>
    </div>
    <div class="card">
      <div class="grid-2">
        <div>
          <div class="form-group">
            <label>Shape</label>
            <select id="areaShape" onchange="renderAreaInputs()">
              <option value="rectangle">Rectangle</option>
              <option value="circle">Circle</option>
              <option value="triangle">Triangle</option>
              <option value="square">Square</option>
              <option value="trapezoid">Trapezoid</option>
            </select>
          </div>
          <div id="areaInputs"></div>
          <button class="btn btn-primary" onclick="calcArea()">Calculate Area</button>
        </div>
        <div id="areaResult"><div class="empty-state">Select a shape and enter dimensions to calculate area</div></div>
      </div>
    </div>
  </section>

</main>

<footer class="footer">
  <strong>CalcPro Suite</strong> â€” Professional Calculators for Everyone<br>
  Powered by Node.js + Express Â· Ready to Deploy Â· 2024
</footer>

<script>
// â”€â”€ CONFIG â”€â”€
const API = window.location.origin + '/api';

// â”€â”€ TAB NAVIGATION â”€â”€
function switchTab(tab) {
  document.querySelectorAll('.calc-section').forEach(s => s.classList.remove('active'));
  document.querySelectorAll('.nav-tab').forEach(t => t.classList.remove('active'));
  document.getElementById('tab-' + tab).classList.add('active');
  document.querySelector(`[data-tab="${tab}"]`).classList.add('active');
  document.querySelector(`[data-tab="${tab}"]`).scrollIntoView({ behavior: 'smooth', block: 'nearest', inline: 'center' });
}

document.querySelectorAll('.nav-tab').forEach(tab => {
  tab.addEventListener('click', () => switchTab(tab.dataset.tab));
});

// â”€â”€ API HELPER â”€â”€
async function post(endpoint, data) {
  const res = await fetch(API + endpoint, {
    method: 'POST', headers: { 'Content-Type': 'application/json' }, body: JSON.stringify(data)
  });
  return res.json();
}

function fmt(n, decimals = 2) {
  if (n === undefined || n === null) return 'â€”';
  const num = parseFloat(n);
  if (isNaN(num)) return 'â€”';
  return num.toLocaleString('en-IN', { maximumFractionDigits: decimals });
}

function showStatus(container, msg, type = 'error') {
  container.innerHTML = `<div class="status-bar ${type}">âš ï¸ ${msg}</div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// BASIC CALCULATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let calcExpr = '', calcResult = '0', isResult = false;
const history = [];

function updateDisplay() {
  document.getElementById('calcMain').textContent = calcResult;
  document.getElementById('calcExpr').textContent = calcExpr;
}

function inputChar(ch) {
  if (isResult) {
    if (['+', '-', '*', '/', '%'].includes(ch)) { calcExpr = calcResult + ch; calcResult = '0'; }
    else { calcResult = ch; calcExpr = ''; }
    isResult = false;
  } else {
    if (calcResult === '0' && ch !== '.') calcResult = ch;
    else calcResult += ch;
    if (['+', '-', '*', '/', '%'].includes(ch)) { calcExpr += (calcResult.slice(0,-1) || '0') + ch; calcResult = '0'; }
  }
  updateDisplay();
}

function clearCalc() { calcExpr = ''; calcResult = '0'; isResult = false; updateDisplay(); }
function backspace() {
  if (isResult) { clearCalc(); return; }
  calcResult = calcResult.length > 1 ? calcResult.slice(0, -1) : '0';
  updateDisplay();
}

function calcFn(fn) {
  const val = parseFloat(calcResult);
  if (isNaN(val)) return;
  let r;
  switch (fn) {
    case 'sin': r = Math.sin(val * Math.PI / 180); break;
    case 'cos': r = Math.cos(val * Math.PI / 180); break;
    case 'sqrt': r = Math.sqrt(val); break;
    case 'pow2': r = val * val; break;
  }
  calcExpr = `${fn}(${calcResult}) =`;
  calcResult = +r.toFixed(10) + '';
  isResult = true; updateDisplay();
}

async function calculate() {
  try {
    const expr = (calcExpr + calcResult).replace(/Ã—/g, '*').replace(/Ã·/g, '/').replace(/âˆ’/g, '-');
    if (!expr || expr === '0') return;
    const data = await post('/basic', { expression: expr });
    if (data.error) { calcResult = 'Error'; isResult = true; updateDisplay(); return; }
    addHistory(calcExpr + calcResult, data.result);
    calcExpr = (calcExpr + calcResult) + ' =';
    calcResult = data.result + '';
    isResult = true; updateDisplay();
  } catch (e) { calcResult = 'Error'; isResult = true; updateDisplay(); }
}

function addHistory(expr, result) {
  history.unshift({ expr, result });
  if (history.length > 20) history.pop();
  renderHistory();
}

function renderHistory() {
  const list = document.getElementById('historyList');
  if (!history.length) { list.innerHTML = '<li class="empty-state">No calculations yet.</li>'; return; }
  list.innerHTML = history.map(h =>
    `<li class="history-item" onclick="loadHistory('${h.result}')">
      <span class="history-expr">${h.expr}</span>
      <span class="history-result">= ${fmt(h.result, 8)}</span>
    </li>`
  ).join('');
}

function loadHistory(r) { calcResult = r + ''; isResult = true; updateDisplay(); }
function clearHistory() { history.length = 0; renderHistory(); }

// Keyboard support
document.addEventListener('keydown', e => {
  if (document.getElementById('tab-basic').classList.contains('active')) {
    if (e.key >= '0' && e.key <= '9') inputChar(e.key);
    else if (['+', '-', '*', '/', '.', '%'].includes(e.key)) inputChar(e.key);
    else if (e.key === 'Enter' || e.key === '=') calculate();
    else if (e.key === 'Backspace') backspace();
    else if (e.key === 'Escape') clearCalc();
  }
});

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// GST CALCULATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let gstType = 'exclusive';

function setGstType(type) {
  gstType = type;
  document.getElementById('gstExclBtn').classList.toggle('active', type === 'exclusive');
  document.getElementById('gstInclBtn').classList.toggle('active', type === 'inclusive');
  document.getElementById('gstAmountLabel').textContent = type === 'exclusive' ? 'Amount (Before GST)' : 'Amount (Including GST)';
}

function setGstRate(rate) {
  document.querySelectorAll('.rate-chip').forEach(c => c.classList.remove('active'));
  if (rate === 'custom') { document.getElementById('gstRate').focus(); return; }
  document.getElementById('gstRate').value = rate;
  event.target.classList.add('active');
}

async function calcGST() {
  const amount = document.getElementById('gstAmount').value;
  const rate = document.getElementById('gstRate').value;
  const status = document.getElementById('gstStatus');
  status.innerHTML = '';
  if (!amount || !rate) return showStatus(status, 'Please enter amount and GST rate');

  const data = await post('/gst', { amount, rate, type: gstType });
  if (data.error) return showStatus(status, data.error);

  document.getElementById('gstResult').innerHTML = `
    <div class="result-grid" style="grid-template-columns:1fr 1fr">
      <div class="result-item"><div class="result-item-label">Original Amount</div><div class="result-item-value">â‚¹ ${fmt(data.originalAmount)}</div></div>
      <div class="result-item"><div class="result-item-label">GST Rate</div><div class="result-item-value">${data.gstRate}%</div></div>
      <div class="result-item" style="background:rgba(247,151,30,0.1);border:1px solid rgba(247,151,30,0.2)"><div class="result-item-label">CGST (${data.gstRate/2}%)</div><div class="result-item-value" style="color:var(--accent4)">â‚¹ ${fmt(data.cgst)}</div></div>
      <div class="result-item" style="background:rgba(247,151,30,0.1);border:1px solid rgba(247,151,30,0.2)"><div class="result-item-label">SGST (${data.gstRate/2}%)</div><div class="result-item-value" style="color:var(--accent4)">â‚¹ ${fmt(data.sgst)}</div></div>
      <div class="result-item" style="background:rgba(67,233,123,0.1);border:1px solid rgba(67,233,123,0.2)"><div class="result-item-label">Total GST</div><div class="result-item-value" style="color:var(--accent3)">â‚¹ ${fmt(data.gstAmount)}</div></div>
      <div class="result-item" style="background:rgba(108,99,255,0.12);border:1px solid rgba(108,99,255,0.25)"><div class="result-item-label">Total Amount</div><div class="result-item-value" style="color:var(--accent);font-size:1.2rem">â‚¹ ${fmt(data.totalAmount)}</div></div>
    </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TDS CALCULATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let tdsCategory = 'salary';

function setTdsCategory(cat, name, el) {
  tdsCategory = cat;
  document.querySelectorAll('.cat-card').forEach(c => c.classList.remove('active'));
  el.classList.add('active');
}

async function calcTDS() {
  const amount = document.getElementById('tdsAmount').value;
  if (!amount) return;

  const data = await post('/tds', { amount, category: tdsCategory });
  if (data.error) { document.getElementById('tdsResult').innerHTML = `<div class="empty-state">${data.error}</div>`; return; }

  document.getElementById('tdsResult').innerHTML = `
    <div style="margin-bottom:1rem">
      <div style="font-size:0.78rem;color:var(--text2);margin-bottom:4px">CATEGORY</div>
      <div style="font-family:'Syne',sans-serif;font-weight:700">${data.category} <span style="color:var(--text2);font-size:0.85rem;font-weight:400">Â· Section ${data.section}</span></div>
    </div>
    <div class="result-grid" style="grid-template-columns:1fr 1fr">
      <div class="result-item"><div class="result-item-label">Gross Amount</div><div class="result-item-value">â‚¹ ${fmt(data.grossAmount)}</div></div>
      <div class="result-item"><div class="result-item-label">TDS Rate</div><div class="result-item-value">${data.tdsRate}%</div></div>
      <div class="result-item"><div class="result-item-label">Basic TDS</div><div class="result-item-value" style="color:var(--accent2)">â‚¹ ${fmt(data.basicTDS)}</div></div>
      <div class="result-item"><div class="result-item-label">Surcharge</div><div class="result-item-value">â‚¹ ${fmt(data.surcharge)}</div></div>
      <div class="result-item"><div class="result-item-label">Education Cess (4%)</div><div class="result-item-value">â‚¹ ${fmt(data.educationCess)}</div></div>
      <div class="result-item" style="background:rgba(255,107,107,0.1);border:1px solid rgba(255,107,107,0.2)"><div class="result-item-label">Total TDS</div><div class="result-item-value" style="color:var(--accent2);font-size:1.2rem">â‚¹ ${fmt(data.totalTDS)}</div></div>
    </div>
    <div class="result-item" style="margin-top:1rem;background:rgba(67,233,123,0.1);border:1px solid rgba(67,233,123,0.25)">
      <div class="result-item-label">Net Amount Received</div>
      <div class="result-item-value" style="color:var(--accent3);font-size:1.4rem">â‚¹ ${fmt(data.netAmount)}</div>
    </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// EMI CALCULATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function calcEMI() {
  const principal = document.getElementById('emiPrincipal').value;
  const rate = document.getElementById('emiRate').value;
  const tenure = document.getElementById('emiTenure').value;
  if (!principal || !rate || !tenure) return;

  const data = await post('/emi', { principal, rate, tenure });
  if (data.error) { document.getElementById('emiResult').innerHTML = `<div class="empty-state">${data.error}</div>`; return; }

  const pct = (data.principal / data.totalAmount * 100).toFixed(1);
  const iPct = (data.totalInterest / data.totalAmount * 100).toFixed(1);

  let scheduleRows = data.schedule.map((row, i, arr) => {
    let extraRow = (i === 4 && data.tenure > 6) ? `<tr><td colspan="5" class="ellipsis" style="padding:12px">â‹¯ ${data.tenure - 6} more months â‹¯</td></tr>` : '';
    return `${extraRow}<tr>
      <td>${row.month}</td>
      <td>â‚¹ ${fmt(row.emi)}</td>
      <td>â‚¹ ${fmt(row.principal)}</td>
      <td style="color:var(--accent2)">â‚¹ ${fmt(row.interest)}</td>
      <td style="color:var(--text2)">â‚¹ ${fmt(row.balance)}</td>
    </tr>`;
  }).join('');

  document.getElementById('emiResult').innerHTML = `
    <div class="result-grid" style="grid-template-columns:1fr 1fr;margin-bottom:1rem">
      <div class="result-item" style="background:rgba(108,99,255,0.12);border:1px solid rgba(108,99,255,0.25);grid-column:span 2"><div class="result-item-label">Monthly EMI</div><div class="result-item-value" style="color:var(--accent);font-size:1.8rem">â‚¹ ${fmt(data.emi)}</div></div>
      <div class="result-item"><div class="result-item-label">Principal</div><div class="result-item-value" style="color:var(--accent3)">â‚¹ ${fmt(data.principal)} (${pct}%)</div></div>
      <div class="result-item"><div class="result-item-label">Total Interest</div><div class="result-item-value" style="color:var(--accent2)">â‚¹ ${fmt(data.totalInterest)} (${iPct}%)</div></div>
      <div class="result-item"><div class="result-item-label">Total Amount</div><div class="result-item-value">â‚¹ ${fmt(data.totalAmount)}</div></div>
      <div class="result-item"><div class="result-item-label">Tenure</div><div class="result-item-value">${data.tenure} months</div></div>
    </div>
    <div style="font-size:0.82rem;font-weight:600;color:var(--text2);text-transform:uppercase;letter-spacing:0.05em;margin-bottom:8px">Amortization Schedule</div>
    <div style="overflow-x:auto">
      <table class="amort-table">
        <thead><tr><th>Month</th><th>EMI</th><th>Principal</th><th>Interest</th><th>Balance</th></tr></thead>
        <tbody>${scheduleRows}</tbody>
      </table>
    </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// PERCENTAGE CALCULATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
let pctType = 'of';
const pctConfigs = {
  'of': { a: 'Percentage (%)', b: 'Of Number', label: '% of' },
  'what': { a: 'Number (A)', b: 'Total Number (B)', label: 'is what % of' },
  'change': { a: 'Original Value', b: 'New Value', label: '% change' },
  'add': { a: 'Percentage to Add (%)', b: 'Number', label: 'add %' },
  'subtract': { a: 'Percentage to Subtract (%)', b: 'Number', label: 'subtract %' }
};

function setPctType(type) {
  pctType = type;
  document.querySelectorAll('[id^="pct-"]').forEach(b => b.classList.remove('btn-primary'));
  document.getElementById('pct-' + type + '-btn').classList.add('btn-primary');
  renderPctInputs();
}

function renderPctInputs() {
  const cfg = pctConfigs[pctType];
  document.getElementById('pctInputs').innerHTML = `
    <div class="form-group"><label>${cfg.a}</label><input type="number" id="pctA" placeholder="Enter value" step="any"></div>
    <div class="form-group"><label>${cfg.b}</label><input type="number" id="pctB" placeholder="Enter value" step="any"></div>`;
}

async function calcPct() {
  const a = document.getElementById('pctA')?.value;
  const b = document.getElementById('pctB')?.value;
  if (!a || !b) return;

  const data = await post('/percentage', { type: pctType, a, b });
  const result = document.getElementById('pctResult');
  if (data.error) { result.innerHTML = `<div class="empty-state">${data.error}</div>`; return; }

  const color = (data.isIncrease === false) ? 'var(--accent2)' : 'var(--accent3)';
  const arrow = data.isIncrease === false ? 'â–¼' : data.isIncrease ? 'â–²' : '';

  result.innerHTML = `
    <div class="result-item" style="background:rgba(108,99,255,0.1);border:1px solid rgba(108,99,255,0.25)">
      <div class="result-item-label">${data.label}</div>
      <div style="font-family:'DM Mono',monospace;font-size:2.2rem;font-weight:500;color:${pctType==='change'?color:'var(--accent)'}">
        ${arrow} ${fmt(data.answer, 4)}${pctType !== 'of' ? (pctType === 'change' || pctType === 'what' ? '%' : '') : ''}
      </div>
    </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AGE CALCULATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function calcAge() {
  const dob = document.getElementById('ageDob').value;
  if (!dob) return;

  const data = await post('/age', { dob });
  if (data.error) { document.getElementById('ageResult').innerHTML = `<div class="empty-state">${data.error}</div>`; return; }

  document.getElementById('ageResult').innerHTML = `
    <div style="text-align:center;margin-bottom:1.5rem">
      <div style="font-family:'Syne',sans-serif;font-size:2.8rem;font-weight:800;background:linear-gradient(135deg,var(--accent),var(--accent5));-webkit-background-clip:text;-webkit-text-fill-color:transparent">
        ${data.years} <span style="font-size:1.4rem">yrs</span> ${data.months} <span style="font-size:1.4rem">mo</span> ${data.days} <span style="font-size:1.4rem">days</span>
      </div>
      <div style="color:var(--text2);margin-top:4px">Born on a ${data.dayOfWeekBorn} Â· ${data.zodiac}</div>
    </div>
    <div class="result-grid" style="grid-template-columns:1fr 1fr">
      <div class="result-item"><div class="result-item-label">Total Days</div><div class="result-item-value">${data.totalDays.toLocaleString()}</div></div>
      <div class="result-item"><div class="result-item-label">Total Weeks</div><div class="result-item-value">${data.totalWeeks.toLocaleString()}</div></div>
      <div class="result-item"><div class="result-item-label">Total Hours</div><div class="result-item-value">${data.totalHours.toLocaleString()}</div></div>
      <div class="result-item" style="background:rgba(108,99,255,0.1)"><div class="result-item-label">Next Birthday In</div><div class="result-item-value" style="color:var(--accent)">${data.daysToNextBirthday} days ğŸ‚</div></div>
    </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// HEIGHT CONVERTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function calcHeight() {
  const value = document.getElementById('heightVal').value;
  const from = document.getElementById('heightFrom').value;
  if (!value) return;

  const data = await post('/height', { value, from });
  if (data.error) { document.getElementById('heightResult').innerHTML = `<div class="empty-state">${data.error}</div>`; return; }

  const units = [
    { key: 'cm', label: 'Centimetres' }, { key: 'm', label: 'Metres' },
    { key: 'ftFormatted', label: 'Feet & Inches' }, { key: 'ft', label: 'Feet (decimal)' },
    { key: 'inches', label: 'Inches' }, { key: 'mm', label: 'Millimetres' },
    { key: 'yards', label: 'Yards' }
  ];

  document.getElementById('heightResult').innerHTML = `<div class="conv-table">${
    units.map(u => `<div class="conv-row">
      <div class="conv-unit">${u.label}</div>
      <div class="conv-value ${u.key === from || (u.key === 'ftFormatted' && from === 'ft') ? 'highlight' : ''}">${fmt(data[u.key], 4)}</div>
    </div>`).join('')
  }</div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// LENGTH CONVERTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function calcLength() {
  const value = document.getElementById('lengthVal').value;
  const from = document.getElementById('lengthFrom').value;
  if (!value) return;

  const data = await post('/length', { value, from });
  if (data.error) { document.getElementById('lengthResult').innerHTML = `<div class="empty-state">${data.error}</div>`; return; }

  const units = [
    { key: 'mm', label: 'Millimetres' }, { key: 'cm', label: 'Centimetres' },
    { key: 'm', label: 'Metres' }, { key: 'km', label: 'Kilometres' },
    { key: 'in', label: 'Inches' }, { key: 'ft', label: 'Feet' },
    { key: 'yd', label: 'Yards' }, { key: 'mi', label: 'Miles' },
    { key: 'nm', label: 'Nautical Miles' }
  ];

  document.getElementById('lengthResult').innerHTML = `<div class="conv-table">${
    units.map(u => `<div class="conv-row">
      <div class="conv-unit">${u.label}</div>
      <div class="conv-value ${u.key === from ? 'highlight' : ''}">${fmt(data[u.key], 6)}</div>
    </div>`).join('')
  }</div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// WEIGHT CONVERTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function calcWeight() {
  const value = document.getElementById('weightVal').value;
  const from = document.getElementById('weightFrom').value;
  if (!value) return;

  const data = await post('/weight', { value, from });
  if (data.error) { document.getElementById('weightResult').innerHTML = `<div class="empty-state">${data.error}</div>`; return; }

  const units = [
    { key: 'kg', label: 'Kilograms' }, { key: 'g', label: 'Grams' },
    { key: 'mg', label: 'Milligrams' }, { key: 'lb', label: 'Pounds' },
    { key: 'oz', label: 'Ounces' }, { key: 'ton', label: 'Metric Tonne' },
    { key: 'stone', label: 'Stone' }
  ];

  document.getElementById('weightResult').innerHTML = `<div class="conv-table">${
    units.map(u => `<div class="conv-row">
      <div class="conv-unit">${u.label}</div>
      <div class="conv-value ${u.key === from ? 'highlight' : ''}">${fmt(data[u.key], 6)}</div>
    </div>`).join('')
  }</div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// TEMPERATURE CONVERTER
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
async function calcTemp() {
  const value = document.getElementById('tempVal').value;
  const from = document.getElementById('tempFrom').value;
  if (!value) return;

  const data = await post('/temperature', { value, from });
  if (data.error) { document.getElementById('tempResult').innerHTML = `<div class="empty-state">${data.error}</div>`; return; }

  document.getElementById('tempResult').innerHTML = `
    <div class="conv-table">
      <div class="conv-row"><div class="conv-unit">Celsius</div><div class="conv-value ${from==='c'?'highlight':''}">${fmt(data.celsius, 4)} Â°C</div></div>
      <div class="conv-row"><div class="conv-unit">Fahrenheit</div><div class="conv-value ${from==='f'?'highlight':''}">${fmt(data.fahrenheit, 4)} Â°F</div></div>
      <div class="conv-row"><div class="conv-unit">Kelvin</div><div class="conv-value ${from==='k'?'highlight':''}">${fmt(data.kelvin, 4)} K</div></div>
      <div class="conv-row"><div class="conv-unit">Rankine</div><div class="conv-value">${fmt(data.rankine, 4)} Â°R</div></div>
    </div>`;
}

// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
// AREA CALCULATOR
// â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
function renderAreaInputs() {
  const shape = document.getElementById('areaShape').value;
  const configs = {
    rectangle: [{ id: 'length', label: 'Length' }, { id: 'width', label: 'Width' }],
    circle: [{ id: 'radius', label: 'Radius' }],
    triangle: [{ id: 'base', label: 'Base' }, { id: 'height', label: 'Height' }, { id: 'a', label: 'Side A' }, { id: 'b', label: 'Side B' }, { id: 'c', label: 'Side C' }],
    square: [{ id: 'side', label: 'Side Length' }],
    trapezoid: [{ id: 'a', label: 'Parallel Side A' }, { id: 'b', label: 'Parallel Side B' }, { id: 'height', label: 'Height' }, { id: 'c', label: 'Leg C' }, { id: 'd', label: 'Leg D' }],
  };
  document.getElementById('areaInputs').innerHTML = configs[shape].map(f =>
    `<div class="form-group"><label>${f.label}</label><input type="number" id="area_${f.id}" placeholder="Enter ${f.label.toLowerCase()}" step="any"></div>`
  ).join('');
}

async function calcArea() {
  const shape = document.getElementById('areaShape').value;
  const getVal = id => { const el = document.getElementById('area_' + id); return el ? parseFloat(el.value) : undefined; };

  let payload = { shape };
  const configs = { rectangle: ['length','width'], circle: ['radius'], triangle: ['base','height','a','b','c'], square: ['side'], trapezoid: ['a','b','height','c','d'] };
  configs[shape].forEach(f => { const v = getVal(f); if (v !== undefined) payload[f] = v; });

  const data = await post('/area', payload);
  if (data.error) { document.getElementById('areaResult').innerHTML = `<div class="empty-state">${data.error}</div>`; return; }

  document.getElementById('areaResult').innerHTML = `
    <div style="margin-bottom:1rem;font-size:0.82rem;color:var(--text2);font-family:'DM Mono',monospace">${data.formula}</div>
    <div class="result-grid" style="grid-template-columns:1fr 1fr">
      <div class="result-item" style="background:rgba(108,99,255,0.1);border:1px solid rgba(108,99,255,0.25);grid-column:span 2"><div class="result-item-label">Area</div><div class="result-item-value" style="color:var(--accent);font-size:1.6rem">${fmt(data.area, 4)} mÂ²</div></div>
      <div class="result-item"><div class="result-item-label">Perimeter</div><div class="result-item-value">${fmt(data.perimeter, 4)} m</div></div>
      <div class="result-item"><div class="result-item-label">Area in sq ft</div><div class="result-item-value">${fmt(data.areaInSqFt, 4)} ftÂ²</div></div>
    </div>`;
}

// â”€â”€ INIT â”€â”€
renderPctInputs();
setPctType('of');
renderAreaInputs();
</script>
</body>
</html>
